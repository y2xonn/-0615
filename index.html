<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI 맞춤형 SNS</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background-color: #f0f2f5;
    }
    h1, h2 {
      color: #333;
    }
    form, .section {
      margin-bottom: 2rem;
    }
    input, select, textarea, button {
      display: block;
      margin-top: 0.5rem;
      padding: 0.5rem;
      width: 300px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 1rem;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #0056b3;
    }
    #ai-posts {
      background: white;
      padding: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    label {
      font-weight: bold;
      margin-top: 1rem;
    }
    select {
      background-color: white;
    }
  </style>
</head>
<body>

  <h1>회원가입</h1>
  <form id="signup-form">
    <label>아이디: <input type="text" id="signup-username"></label>
    <label>비밀번호: <input type="password" id="signup-password"></label>
    <button type="button" onclick="handleSignup()">회원가입</button>
  </form>

  <h1>로그인</h1>
  <form id="login-form">
    <label>아이디: <input type="text" id="login-username"></label>
    <label>비밀번호: <input type="password" id="login-password"></label>
    <button type="button" onclick="handleLogin()">로그인</button>
  </form>

  <h1>관심사 선택</h1>
  <div class="section">
    <select id="interest">
      <option value="technology">기술</option>
      <option value="sports">스포츠</option>
      <option value="art">예술</option>
      <option value="fashion">패션</option>
    </select>
    <button onclick="generateAIContent()">관심사 기반 AI 글 생성</button>
  </div>

  <h2>AI가 생성한 글</h2>
  <div id="ai-posts"></div>

  <script>
    function handleSignup() {
      const id = document.getElementById('signup-username').value;
      const pw = document.getElementById('signup-password').value;
      alert(`${id} 님, 회원가입이 완료되었습니다.`);
    }

    function handleLogin() {
      const id = document.getElementById('login-username').value;
      const pw = document.getElementById('login-password').value;
      alert(`${id} 님, 로그인에 성공하였습니다.`);
    }

    // 편향 감지 알고리즘: 단순 키워드 기반
    function detectBias(text) {
      const biasedKeywords = [
        "모두가", "절대", "반드시", "여성은", "남성은",
        "흑인은", "백인은", "한국인은", "못생긴", "이상한", "게으른", "폭력적"
      ];
      return biasedKeywords.some(keyword => text.includes(keyword));
    }

    async function generateAIContent() {
      const interest = document.getElementById('interest').value;
      const aiPosts = document.getElementById('ai-posts');

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer 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"
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [
              {
                role: "user",
                content: `${interest}와 관련된 짧은 소셜미디어 게시글을 작성해줘.`
              }
            ],
            max_tokens: 100
          })
        });

        const data = await response.json();
        const content = data.choices[0].message.content;

        // 편향 감지 실행
        const isBiased = detectBias(content);
        aiPosts.innerHTML = `
          <p>${content}</p>
          ${isBiased ? '<p style="color: red; font-weight: bold;">⚠️ 편향 가능성 있음</p>' : ''}
        `;
      } catch (error) {
        aiPosts.innerText = "AI 생성 중 오류가 발생했습니다.";
        console.error("OpenAI API Error:", error);
      }
    }
  </script>

</body>
</html>
